{"version":3,"sources":["../src/dict-to-json.js"],"names":["parse","require","moji","readDic","content","Promise","resolve","reject","delimiter","err","output","csv2json","csv","map","x","convert","toString","parseFloat","module","exports","then"],"mappings":"AAAA;AACA;;AACA,IAAMA,QAAQC,QAAQ,WAAR,CAAd;AACA,IAAMC,OAAOD,QAAQ,MAAR,CAAb;AACA,SAASE,OAAT,CAAiBC,OAAjB,EAA0B;AACtB,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCP,cAAMI,OAAN,EAAe,EAACI,WAAW,GAAZ,EAAf,EAAiC,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC9C,gBAAID,GAAJ,EAAS;AACL,uBAAOF,OAAOE,GAAP,CAAP;AACH;AACDH,oBAAQI,MAAR;AACH,SALD;AAMH,KAPM,CAAP;AAQH;AACD;;;;;;;AAOA;;;;;AAKA,SAASC,QAAT,CAAkBC,GAAlB,EAAuB;AACnB,WAAOA,IAAIC,GAAJ,CAAQ,aAAK;AAChB,eAAO;AACH,uBAAWC,EAAE,CAAF,CADR;AAEH,uBAAWZ,KAAKY,EAAE,CAAF,CAAL,EAAWC,OAAX,CAAmB,IAAnB,EAAyB,IAAzB,EAA+BC,QAA/B,EAFR;AAGH,mBAAOF,EAAE,CAAF,CAHJ;AAIH,oBAAQG,WAAWH,EAAE,CAAF,CAAX;AAJL,SAAP;AAMH,KAPM,CAAP;AAQH;;AAED;;;;;;;AAOAI,OAAOC,OAAP,GAAiB,UAASf,OAAT,EAAkB;AAC/B,WAAOD,QAAQC,OAAR,EAAiBgB,IAAjB,CAAsBT,QAAtB,CAAP;AACH,CAFD","file":"dict-to-json.js","sourcesContent":["// MIT © 2017 azu\n\"use strict\";\nconst parse = require(\"csv-parse\");\nconst moji = require('moji');\nfunction readDic(content) {\n    return new Promise((resolve, reject) => {\n        parse(content, {delimiter: ':'}, (err, output) => {\n            if (err) {\n                return reject(err);\n            }\n            resolve(output);\n        });\n    });\n}\n/**\n * @typedef {Object} NegaPosiDict\n * @property {string} surface 漢字\n * @property {string} reading カタカナ(kuromojiに合わせてカタカナ)\n * @property {string} pos 品詞\n * @property {number} rank 評価値\n */\n/**\n * convert `csv` to array of NegaPosiDict\n * @param {Array} csv\n * @returns {NegaPosiDict[]}\n */\nfunction csv2json(csv) {\n    return csv.map(x => {\n        return {\n            'surface': x[0],\n            'reading': moji(x[1]).convert('HG', 'KK').toString(),\n            'pos': x[2],\n            'rank': parseFloat(x[3]),\n        };\n    })\n}\n\n/**\n * Convert `content` to NegaPosiDict[]\n * `content` is a content of http://www.lr.pi.titech.ac.jp/~takamura/pubs/pn_ja.dic dictionary.\n * @param {string} content\n * @returns {Promise.<NegaPosiDict[]>}\n * @see http://www.lr.pi.titech.ac.jp/~takamura/pubs/pn_ja.dic\n */\nmodule.exports = function(content) {\n    return readDic(content).then(csv2json);\n};\n"]}